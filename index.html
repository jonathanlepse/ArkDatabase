<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title></title>

        <script src="jquery.min.js"></script>
        <script type="text/javascript">
            var printVal = function(val){
                var innerval = "";
                if(typeof val["url"] !== "undefined") {
                    return "<li id='" + "name_full" + "'>" + "<a target='_blank' href='" + val.url +"'>" + val.name_full + "</a>" +  "</li>";
                }
                innerval += val.name_full
                if(typeof val["url"] !== "undefined") {
                    return "<li id='" + "name_full" + "'>" + "<a target='_blank' href='" + val.url +"'>" + val.name_full + "</a>" +  "</li>";
                }

                return "<li id='" + "name_full" + "'>" + innerval + "</li>";

            };
            var printSubTerm = function(val, term) {
                var items = [];
                if (typeof val[term] !== "undefined" && val[term].length > 0) {
                    items.push("<p>" + term + "</p>");
                    items.push("<ul>");
                    $.each(val.villages, function (key, val) {
                        items.push(printVal(val));
                    });
                    items.push("</ul>");
                }
                ;
                return items.join("");
            };
        </script>
    </head>
    <body>
        <div id="content"></div>

        <script>
            $(document).ready(function() {
                $.getJSON("municipalities_newyork_NassauCounty.json", function (data) {
                    var items = [];
                    $.each(data, function (key, val) {
                        items.push(printVal(val));
                        items.push(printSubTerm(val, "villages"));
                    });
                    $("<ul/>", {
                        "class": "my-new-list",
                        html: items.join("")
                    }).appendTo("#content");
                });
            });

        </script>
    </body>
</html>
